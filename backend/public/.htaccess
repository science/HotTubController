# Hot Tub Controller API - Apache URL Rewriting

RewriteEngine On

# Add trailing slash to ESP32 temperature endpoint (directory with index.php)
# This is a simple redirect, not a silent rewrite - the URL changes visibly
RewriteRule ^api/esp32/temperature$ api/esp32/temperature/ [R=301,L]

# Cron health endpoint - bypasses framework to avoid ModSecurity blocks
# Named to avoid triggering security rules on words like "maintenance", "setup", "init"
RewriteRule ^api/cron/health$ cron-health.php [L]

# If the request is for a real file or directory, serve it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Route everything else to index.php
RewriteRule ^ index.php [L]
