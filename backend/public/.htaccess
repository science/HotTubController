# Hot Tub Controller API - Apache URL Rewriting

RewriteEngine On

# ESP32 temperature endpoint - internal rewrite to handler
# Must NOT redirect (301/302) because ESP32 can't follow redirects on POST
RewriteRule ^api/esp32/temperature$ api/esp32/temperature/index.php [L]

# Cron health endpoint - bypasses framework to avoid ModSecurity blocks
# Named to avoid triggering security rules on words like "maintenance", "setup", "init"
RewriteRule ^api/cron/health$ cron-health.php [L]

# If the request is for a real file or directory, serve it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Route everything else to index.php
RewriteRule ^ index.php [L]
