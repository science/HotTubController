# Hot Tub Controller API - Apache URL Rewriting

RewriteEngine On

# ESP32 temperature endpoint - route to lightweight handler
# This bypasses the full framework for better performance on shared hosting
RewriteRule ^api/esp32/temperature$ esp32-temp.php [L]

# Cron health endpoint - bypasses framework to avoid ModSecurity blocks
# Named to avoid triggering security rules on words like "maintenance", "setup", "init"
RewriteRule ^api/cron/health$ cron-health.php [L]

# If the request is for a real file or directory, serve it directly
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# Route everything else to index.php
RewriteRule ^ index.php [L]
